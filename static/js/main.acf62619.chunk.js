(this.webpackJsonptasker=this.webpackJsonptasker||[]).push([[0],{130:function(e,t,a){e.exports={titleBlock:"TitleElement_titleBlock__3QuwQ",titleText:"TitleElement_titleText__1oIzE"}},135:function(e,t,a){e.exports={sharedBy:"TaskHeader_sharedBy__1Baap",taskIcon:"TaskHeader_taskIcon__6hQY4"}},136:function(e,t,a){e.exports={cardText:"TaskItem_cardText__3Jmcz",cardDiv:"TaskItem_cardDiv__eOSQK"}},137:function(e,t,a){e.exports={spinnerModal:"ModalSpinner_spinnerModal__2A3Hc",spinner:"ModalSpinner_spinner__2eLjA"}},138:function(e,t,a){e.exports={navLink:"NavigationLink_navLink__3b_Hy",navLinkActive:"NavigationLink_navLinkActive__1AVDG"}},213:function(e,t,a){e.exports={input:"InputElement_input__3ZUFV"}},217:function(e,t,a){e.exports=a.p+"static/media/logo.cdc9dbf8.png"},218:function(e,t,a){e.exports={submitBtn:"SubmitButton_submitBtn__1_DSK"}},219:function(e,t,a){e.exports={alert:"AlertMessage_alert__aOcKo"}},221:function(e,t,a){e.exports={redirectLink:"SignIn_redirectLink__1X4aj"}},223:function(e,t,a){e.exports={redirectLink:"SignUp_redirectLink__3bMHW"}},228:function(e,t,a){e.exports={cardBottomText:"TaskFooter_cardBottomText__3VU_j"}},229:function(e,t,a){e.exports={cardTitle:"TaskTitle_cardTitle__t5FXl"}},231:function(e,t,a){e.exports={inputsBlock:"CreateTask_inputsBlock__1n_OZ"}},232:function(e,t,a){e.exports={inputsBlock:"EditTask_inputsBlock__28U0M"}},233:function(e,t,a){e.exports=a.p+"static/media/logo-invert.31eef98b.png"},234:function(e,t,a){e.exports={brandLink:"NavigationBrand_brandLink__hYzgZ"}},235:function(e,t,a){e.exports={logoutBtn:"LogoutButton_logoutBtn__1zfPL"}},239:function(e,t,a){e.exports=a(395)},244:function(e,t,a){},269:function(e,t,a){},27:function(e,t,a){e.exports={label:"TaskComponents_label__2xFCB",createTaskLabel:"TaskComponents_createTaskLabel__ec2Zz",listItem:"TaskComponents_listItem__AqF4P",manageItems:"TaskComponents_manageItems__380Wp",addItem:"TaskComponents_addItem__3Hf7U",removeItem:"TaskComponents_removeItem__ULSkI",button:"TaskComponents_button__4o4QR"}},273:function(e,t){},275:function(e,t){},311:function(e,t){},312:function(e,t){},392:function(e,t){},395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a.n(l),c=(a(244),a(23)),o=(a(245),a(54)),s=a(24),u=a(43),m=a(9),d=a(10),f=a(403),p=a(404),E=a(216),h=a(409),v=a(213),g=a.n(v),k=function(e){return r.a.createElement(h.a.Group,{className:g.a.input},r.a.createElement(h.a.Label,null,e.label),r.a.createElement(h.a.Control,{type:e.type,placeholder:e.placeholder,onChange:e.onInput,value:e.value,isInvalid:e.error}),r.a.createElement(h.a.Control.Feedback,{type:"invalid"},e.helperText))},b=a(217),T=a.n(b),_=a(130),O=a.n(_),S=function(e){return r.a.createElement("div",{className:O.a.titleBlock},r.a.createElement("div",null,r.a.createElement("img",{src:T.a,alt:"Logo",height:"70"})),r.a.createElement("div",{className:O.a.titleText},e.children))},j=function(e){return r.a.createElement(h.a.Group,null,r.a.createElement(h.a.Check,{id:"custom-checkbox",type:"checkbox",label:"Remember me",onChange:e.onChange,custom:!0}))},I=a(400),C=a(401),y=a(218),x=a.n(y),L=function(e){var t=null;return e.startAuth&&(t=r.a.createElement(I.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})),r.a.createElement(C.a,{variant:"primary",type:"submit",className:x.a.submitBtn,onClick:e.onClick,disabled:e.startAuth||e.disabled},e.text," ",t)},A=a(402),N=a(219),M=a.n(N),w=function(e){return e.result.message?r.a.createElement(A.a,{className:M.a.alert,variant:e.result.error?"danger":"success",onClose:e.hideAlert?e.hideAlert:function(){},dismissible:e.hideAlert},r.a.createElement("p",{style:{margin:"0"}},e.result.message)):null},B=a(220),R=a.n(B).a.create({baseURL:"https://immense-lake-83365.herokuapp.com/"}),D=function(e){return{type:"AUTH_ERROR",err:e}},U=function(e,t){return{type:"LOGIN",token:e,remember:t}},H=function(){return function(e){R.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),e({type:"SIGN_IN_LOCALY"}),e(F())}},F=function(){return function(e,t){clearTimeout(t().auth.refreshTimerId);var a=1e3*(t().auth.expirationTime-Math.floor((new Date).getTime()/1e3))-3e4;a<0&&(a=15e3);var n=setTimeout((function(){var a={token:t().auth.token};try{e(V(a))}catch(n){console.log(n)}}),a);e(function(e){return{type:"RESET_TIMEOUT_ID",id:e}}(n))}},V=function(e){return function(t,a){R.post("/user/refresh-token",e).then((function(e){R.defaults.headers.common.Authorization="Bearer "+e.data,t(function(e){return{type:"REFRESH_TOKEN",token:e}}(e)),a().auth.id?t(F()):t(H())})).catch((function(e){t(D(e)),t({type:"LOGOUT"})}))}},K=function(e,t,a){return e||0!==a.length?a:t},z=function(e,t,a){var n=!0,r="";if(t.isRequred&&n&&(n=e.length>0&&n,r=K(n,"Please, fill this field",r)),t.isEmail&&n){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&n,r=K(n,"Email is incorrect",r)}return t.minLength&&n&&(n=e.length>5&&n,r=K(n,"Min password length is 6 symbols",r)),t.maxLength&&n&&(n=e.length<t.maxLength&&n,r=K(n,"Max length is "+t.maxLength+" symbols",r)),t.shoudBeEqual&&n&&(r=K(n=e===a&&n,"Emails don't match",r)),[n,r]},G=a(221),P=a.n(G),q=Object(s.b)((function(e){return{errorMessage:e.auth.errorMessage,email:e.auth.email,authStart:e.auth.authStart}}),(function(e){return{onSignIn:function(t,a){return e((n=t,r=a,function(e){e({type:"AUTH_START"}),R.post("/user/signin",n).then((function(t){R.defaults.headers.common.Authorization="Bearer "+t.data,e(U(t,r)),e(F())})).catch((function(t){e(D(t))}))}));var n,r}}}))((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)({email:{config:{label:"Email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,isEmail:!0},isValid:!1,validationMessage:"",value:""},password:{config:{label:"Password",type:"password",placeholder:"Type password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),v=Object(d.a)(s,2),g=v[0],b=v[1];if(e.email)return r.a.createElement(o.a,{to:"/"});var T=function(e,t){var a=t.target.value,n=z(a,g[e].validationRules,g.email.value),r=Object(d.a)(n,2),l=r[0],i=r[1];b((function(t){return Object(m.a)({},t,Object(u.a)({},e,Object(m.a)({},t[e],{value:a,isValid:l,validationMessage:i})))}))},_=[],O=!0;for(var I in g)_.push(r.a.createElement(k,{key:I,label:g[I].config.label,type:g[I].config.type,placeholder:g[I].config.placeholder,value:g[I].value,onInput:T.bind(void 0,I),error:!g[I].isValid&&g[I].value.length>0,helperText:g[I].validationMessage})),O=g[I].isValid&&O;return r.a.createElement(f.a,{fluid:!0},r.a.createElement(p.a,null,r.a.createElement(E.a,{sm:1,md:4}),r.a.createElement(E.a,{sm:10,md:4},r.a.createElement(S,null,"Sign In"),r.a.createElement(h.a,null,_,r.a.createElement(w,{result:{message:e.errorMessage,error:!0}}),r.a.createElement(j,{onChange:function(){i((function(e){return!e}))}}),r.a.createElement(L,{text:"Sign In",disabled:!O,startAuth:e.authStart,onClick:function(t){t.preventDefault();var a={email:g.email.value,password:g.password.value};e.onSignIn(a,l)}}),r.a.createElement(c.b,{to:"/sign-up",className:P.a.redirectLink},"Don't have an account? Sign Up"))),r.a.createElement(E.a,{sm:1,md:4})))})),Z=a(223),Q=a.n(Z),Y=Object(s.b)((function(e){return{errorMessage:e.auth.errorMessage,email:e.auth.email,authStart:e.auth.authStart}}),(function(e){return{onSignUp:function(t,a){return e((n=t,r=a,function(e){e({type:"AUTH_START"}),R.post("/user/signup",n).then((function(t){R.defaults.headers.common.Authorization="Bearer "+t.data,e(U(t,r)),e(F())})).catch((function(t){e(D(t))}))}));var n,r}}}))((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),v=Object(d.a)(s,2),g=v[0],b=v[1],T=Object(n.useState)(null),_=Object(d.a)(T,2),O=_[0],I=_[1],C=Object(n.useState)({email:{config:{label:"Email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,isEmail:!0},isValid:!1,validationMessage:"",value:""},emailConfirm:{config:{label:"Confirm email address",type:"email",placeholder:"Enter email"},validationRules:{isRequred:!0,shoudBeEqual:!0},isValid:!1,validationMessage:"",value:""},password:{config:{label:"Password",type:"password",placeholder:"Type password"},validationRules:{isRequred:!0,minLength:!0},isValid:!1,validationMessage:"",value:""}}),y=Object(d.a)(C,2),x=y[0],A=y[1];if(Object(n.useEffect)((function(){if(clearTimeout(O),g){var e=setTimeout((function(){var e={email:x.email.value};R.post("/user/email-exists",e).then((function(e){e.data&&A((function(e){return Object(m.a)({},e,{email:Object(m.a)({},e.email,{isValid:!1,validationMessage:"Email already exist"})})}))})).catch((function(e){return console.log(e)}))}),800);I(e)}}),[x.email.value]),e.email)return r.a.createElement(o.a,{to:"/"});var N=function(e,t){var a=t.target.value,n=z(a,x[e].validationRules,x.email.value),r=Object(d.a)(n,2),l=r[0],i=r[1];M(e,l),A((function(t){return Object(m.a)({},t,Object(u.a)({},e,Object(m.a)({},t[e],{value:a,isValid:l,validationMessage:i})))}))},M=function(e,t){"email"===e&&b(t)},B=[],D=!0;for(var U in x)B.push(r.a.createElement(k,{key:U,label:x[U].config.label,type:x[U].config.type,placeholder:x[U].config.placeholder,value:x[U].value,onInput:N.bind(void 0,U),error:!x[U].isValid&&x[U].value.length>0,helperText:x[U].validationMessage})),D=x[U].isValid&&D;return r.a.createElement(f.a,{fluid:!0},r.a.createElement(p.a,null,r.a.createElement(E.a,{sm:1,md:4}),r.a.createElement(E.a,{sm:10,md:4},r.a.createElement(S,null,"Sign Up"),r.a.createElement(h.a,null,B,r.a.createElement(w,{result:{message:e.errorMessage,error:!0}}),r.a.createElement(j,{onChange:function(){i((function(e){return!e}))}}),r.a.createElement(L,{text:"Sign Up",disabled:!D,startAuth:e.authStart,onClick:function(t){t.preventDefault();var a={email:x.email.value,password:x.password.value};e.onSignUp(a,l)}}),r.a.createElement(c.b,{to:"/sign-in",className:Q.a.redirectLink},"Already have an account? Sign in"))),r.a.createElement(E.a,{sm:1,md:4})))})),W=a(414),J=a(410),X=a(406),$=a(22),ee=a(21),te=a(412),ae=a(59),ne=a.n(ae),re=function(e){var t=function(e,t){t.stopPropagation(),e()};return r.a.createElement(J.a,{trigger:"focus",delay:100,rootCloseEvent:"click",placement:"bottom",overlay:r.a.createElement(te.a,null,r.a.createElement(te.a.Content,{className:ne.a.popoverBody},r.a.createElement("div",{className:ne.a.popoverItem,onClick:t.bind(void 0,e.openShareTaskModal)},r.a.createElement($.a,{className:ne.a.leaveIcon,icon:ee.h})," Share task"),r.a.createElement("hr",null),r.a.createElement("div",{className:ne.a.popoverItem,onClick:t.bind(void 0,e.openLeaveTaskModal)},r.a.createElement($.a,{className:ne.a.leaveIcon,icon:ee.c})," Leve task")))},r.a.createElement("button",{className:ne.a.leaveIcon},r.a.createElement($.a,{icon:ee.d})))},le=a(135),ie=a.n(le),ce=function(e){var t=e.sender||"Task Author";return r.a.createElement(W.a.Header,null,r.a.createElement($.a,{className:ie.a.taskIcon,icon:ee.k}),r.a.createElement(J.a,{placement:"top",overlay:r.a.createElement(X.a,null,e.sender?"This user share you this task":"You created this task")},r.a.createElement("p",{className:ie.a.sharedBy},t)),r.a.createElement(re,{openShareTaskModal:e.openShareTaskModal,openLeaveTaskModal:e.openLeaveTaskModal}))},oe=a(228),se=a.n(oe),ue=function(e){var t=e.lastUpdateDate,a=e.createDate;return r.a.createElement("div",{className:se.a.cardBottomText},r.a.createElement("div",null,r.a.createElement($.a,{icon:ee.a})," ",new Date(1e3*t).toLocaleString()),r.a.createElement("div",null,r.a.createElement($.a,{icon:ee.b})," ",new Date(1e3*a).toLocaleDateString()))},me=a(229),de=a.n(me),fe=function(e){var t=e.id,a=e.title;return r.a.createElement(W.a.Title,{className:de.a.cardTitle},r.a.createElement(c.b,{to:{pathname:"/edit-task",state:{taskId:t}}},a))},pe=a(136),Ee=a.n(pe),he=function(e){return r.a.createElement(W.a,{className:Ee.a.cardDiv,bg:"light",text:"dark"},r.a.createElement(ce,{sender:e.task.sender,openShareTaskModal:e.openShareTaskModal,openLeaveTaskModal:e.openLeaveTaskModal}),r.a.createElement(W.a.Body,null,r.a.createElement(fe,{id:e.task._id,title:e.task.title}),r.a.createElement(W.a.Text,{className:Ee.a.cardText},e.task.description),r.a.createElement(ue,{lastUpdateDate:e.task.lastUpdateDate,createDate:e.task.date})))},ve=a(137),ge=a.n(ve),ke=function(){return r.a.createElement("div",{className:ge.a.spinnerModal},r.a.createElement("div",{className:ge.a.spinner},r.a.createElement(I.a,{animation:"border",variant:"primary"})))},be=a(408),Te=a(215),_e=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),l=a[0],i=a[1],c=function(){e.hideModal(),i("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{show:e.show,onHide:c},r.a.createElement(be.a.Header,{closeButton:!0},r.a.createElement(be.a.Title,null,e.title)),r.a.createElement(be.a.Body,null,r.a.createElement(Te.a,{value:l,placeholder:e.placeholder,onChange:function(e){var t=e.target.value;i(t)}})),r.a.createElement(be.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:c},"Cancel"),r.a.createElement(C.a,{variant:"primary",onClick:function(){e.onConfirm(l),c()}},"Confirm"))))},Oe=function(e){return r.a.createElement(be.a,{show:e.show,onHide:e.hideModal},r.a.createElement(be.a.Header,{closeButton:!0},r.a.createElement(be.a.Title,null,e.title)),r.a.createElement(be.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:e.hideModal},"Cancel"),r.a.createElement(C.a,{variant:"primary",onClick:function(){e.onConfirm(),e.hideModal()}},"Confirm")))},Se=Object(s.b)((function(e){return{fetching:e.task.fetching,tasks:e.task.tasks,userId:e.auth.id,userEmail:e.auth.email,socket:e.sckt.socket}}),(function(e){return{fetchTasks:function(t){e(function(e){return function(t){t({type:"FETCH_START"}),R.get("/task/list/".concat(e)).then((function(e){t(function(e){return{type:"FETCH_TASKS",tasks:e}}(e.data))}))}}(t))},clearTasksList:function(){e({type:"CLEAR_TASKS"})},reciveTask:function(t){e(function(e){return{type:"RECIVE_TASK",data:e}}(t))},leaveTask:function(t,a){e(function(e,t){return function(a){R.patch("/task/leave/".concat(e),t).then((function(){a(function(e){return{type:"LEAVE_TASK",taskId:e}}(e))}))}}(t,a))}}}))((function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(!1),s=Object(d.a)(c,2),u=s[0],m=s[1],h=Object(n.useState)(!1),v=Object(d.a)(h,2),g=v[0],k=v[1],b=Object(n.useState)(),T=Object(d.a)(b,2),_=T[0],O=T[1],S=Object(n.useState)({}),j=Object(d.a)(S,2),I=j[0],C=j[1];if(Object(n.useEffect)((function(){return e.fetchTasks(e.userId),i(!1),e.socket.on("recive-shared-task",(function(t){console.log("revive task"),t.to===e.userEmail&&e.reciveTask(t)})),function(){e.socket.removeListener("recive-shared-task"),e.clearTasksList()}}),[]),!e.userId)return r.a.createElement(o.a,{to:"/sign-in"});if(e.fetching||l)return r.a.createElement(ke,null);var y=function(e){k(!0),O(e)},x=function(e){m(!0),O(e)};return r.a.createElement(f.a,null,r.a.createElement(_e,{show:u,title:"Share the task",placeholder:"Email",hideModal:function(){m(!1),O()},onConfirm:function(t){C({});var a={email:t,senderId:e.userId};R.patch("/task/share/".concat(_),a).then((function(){C({message:"Task sent successfully",error:!1});var a=e.tasks.find((function(e){return e._id===_}));e.socket.emit("share-task",e.userEmail,t,a)})).catch((function(e){!function(e){C({message:e.response.data.message||"Something went wrong. Please, try later...",error:!0})}(e)}))}}),r.a.createElement(Oe,{show:g,title:"Leave this task?",hideModal:function(){k(!1),O()},onConfirm:function(){var t={userId:e.userId};e.leaveTask(_,t)}}),r.a.createElement(w,{result:I,hideAlert:function(){C({})}}),r.a.createElement(p.a,null,e.tasks.map((function(e){return r.a.createElement(E.a,{sm:6,md:4,lg:3,className:"mb-3",key:e._id},r.a.createElement(he,{task:e,openShareTaskModal:x.bind(void 0,e._id),openLeaveTaskModal:y.bind(void 0,e._id)}))}))))})),je=a(19),Ie=a(27),Ce=a.n(Ie),ye=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:Ce.a.createTaskLabel},e.mainTitle),r.a.createElement("h4",{className:Ce.a.label},"Title"),r.a.createElement(Te.a,{value:e.value,placeholder:"Type task title",onChange:e.onChange.bind(void 0,"title")}))},xe=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:Ce.a.label},"Description"),r.a.createElement(Te.a,{as:"textarea",value:e.value,placeholder:"Type task description",onChange:e.onChange.bind(void 0,"description")}))},Le=a(415),Ae=function(e){return r.a.createElement("div",{className:e.actionClass,onClick:e.onClick},r.a.createElement($.a,{icon:e.icon}),e.text)},Ne=function(e){return r.a.createElement(Le.a.Item,null,r.a.createElement("div",{className:Ce.a.manageItems},r.a.createElement(Ae,{actionClass:Ce.a.addItem,icon:ee.f,text:" Add one",onClick:e.onAdd}),r.a.createElement(Ae,{actionClass:Ce.a.removeItem,icon:ee.e,text:" Remove one",onClick:e.onRemove})))},Me=a(407),we=function(e){return r.a.createElement(Le.a.Item,{className:Ce.a.listItem},r.a.createElement(Me.a,{pill:!0,variant:"primary"},e.number),r.a.createElement(Te.a,{placeholder:"Type your instruction here",value:e.text,onChange:e.onChange}))},Be=function(e){return r.a.createElement("div",{className:"recipeChunk"},r.a.createElement("h4",{className:Ce.a.label},"Instrcutions"),r.a.createElement(Le.a,null,r.a.createElement(Ne,{onAdd:e.onAdd.bind(void 0,e.type),onRemove:e.onRemove.bind(void 0,e.type)}),e.items.map((function(t,a){return r.a.createElement(we,{key:a,text:t,number:a+1,onChange:e.onChange.bind(void 0,a,e.type)})}))))},Re=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:Ce.a.button,disabled:e.loading,onClick:e.onClick},e.label,e.loading?r.a.createElement(I.a,{size:"sm",animation:"border",variant:"light"}):null))},De=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{sm:1,md:2}),r.a.createElement(E.a,{sm:10,md:8},e.children),r.a.createElement(E.a,{sm:1,md:2}))},Ue=a(231),He=a.n(Ue),Fe=Object(s.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)({title:"",description:"",instructions:[]}),a=Object(d.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(!1),s=Object(d.a)(c,2),h=s[0],v=s[1],g=Object(n.useState)({}),k=Object(d.a)(g,2),b=k[0],T=k[1];if(!e.userId)return r.a.createElement(o.a,{to:"/sign-in"});var _=function(e,t){var a=t.target.value;i((function(t){return Object(m.a)({},t,Object(u.a)({},e,a))}))},O=function(e){return e.filter((function(e){return e.trim().length>0}))};return r.a.createElement(f.a,{fluid:!0},r.a.createElement(p.a,null,r.a.createElement(E.a,{sm:1,md:2,lg:3}),r.a.createElement(E.a,{sm:10,md:8,lg:6},r.a.createElement(p.a,{className:He.a.inputsBlock},r.a.createElement(De,null,r.a.createElement(ye,{mainTitle:"Create Task",value:l.title,onChange:_})),r.a.createElement(De,null,r.a.createElement(xe,{value:l.description,onChange:_})),r.a.createElement(De,null,r.a.createElement(Be,{items:l.instructions,onAdd:function(){i((function(e){var t=Object(je.a)(e.instructions);return t.push(""),Object(m.a)({},e,{instructions:Object(je.a)(t)})}))},onRemove:function(e){i((function(e){var t=Object(je.a)(e.instructions);return t.pop(),Object(m.a)({},e,{instructions:Object(je.a)(t)})}))},onChange:function(e,t,a){var n=a.target.value;i((function(t){var a=Object(je.a)(t.instructions);return a[e]=n,Object(m.a)({},t,{instructions:Object(je.a)(a)})}))}})),r.a.createElement(De,null,r.a.createElement(w,{result:b,hideAlert:function(){T({})}})),r.a.createElement(De,null,r.a.createElement(Re,{label:"Create task ",loading:h,onClick:function(){if(function(){var e=!0;for(var t in l){if("instructions"===t)e=O(l[t]).length>0&&e;else e=l[t].length>0&&e}return e}()){v(!0),T({});var t=function(){var t=Math.floor((new Date).getTime()/1e3);return{title:l.title,description:l.description,instructions:O(l.instructions),ownerId:e.userId,date:t}}();R.post("/task",t).then((function(){e.history.push("/")})).catch((function(e){v(!1),T({message:"Something went wrong...",error:!0})}))}else T({message:"Please fill all fields",error:!0})}})))),r.a.createElement(E.a,{sm:1,md:2,lg:3})))})),Ve=a(232),Ke=a.n(Ve),ze=Object(s.b)((function(e){return{userId:e.auth.id}}))((function(e){var t=Object(n.useState)({id:null,title:"",description:"",instructions:[]}),a=Object(d.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(!0),s=Object(d.a)(c,2),h=s[0],v=s[1],g=Object(n.useState)(!1),k=Object(d.a)(g,2),b=k[0],T=k[1],_=Object(n.useState)({}),O=Object(d.a)(_,2),S=O[0],j=O[1];if(Object(n.useEffect)((function(){var t=e.location.state.taskId;R.get("/task/".concat(t)).then((function(e){i({id:e.data._id,title:e.data.title,description:e.data.description,instructions:e.data.instructions}),v(!1)}))}),[]),!e.userId)return r.a.createElement(o.a,{to:"/sign-in"});if(e.fetching||h)return r.a.createElement(ke,null);var I=function(e,t){var a=t.target.value;i((function(t){return Object(m.a)({},t,Object(u.a)({},e,a))}))},C=function(e){return e.filter((function(e){return e.trim().length>0}))};return r.a.createElement(f.a,{fluid:!0},r.a.createElement(p.a,null,r.a.createElement(E.a,{sm:1,md:2,lg:3}),r.a.createElement(E.a,{sm:10,md:8,lg:6},r.a.createElement(p.a,{className:Ke.a.inputsBlock},r.a.createElement(De,null,r.a.createElement(ye,{mainTitle:"Edit Task",value:l.title,onChange:I})),r.a.createElement(De,null,r.a.createElement(xe,{value:l.description,onChange:I})),r.a.createElement(De,null,r.a.createElement(Be,{items:l.instructions,onAdd:function(){i((function(e){var t=Object(je.a)(e.instructions);return t.push(""),Object(m.a)({},e,{instructions:Object(je.a)(t)})}))},onRemove:function(e){i((function(e){var t=Object(je.a)(e.instructions);return t.pop(),Object(m.a)({},e,{instructions:Object(je.a)(t)})}))},onChange:function(e,t,a){var n=a.target.value;i((function(t){var a=Object(je.a)(t.instructions);return a[e]=n,Object(m.a)({},t,{instructions:Object(je.a)(a)})}))}})),r.a.createElement(De,null,r.a.createElement(w,{result:S,hideAlert:function(){j({})}})),r.a.createElement(De,null,r.a.createElement(Re,{label:"Update task ",loading:b,onClick:function(){if(function(){var e=!0;for(var t in l){if("instructions"===t)e=C(l[t]).length>0&&e;else e=l[t].length>0&&e}return e}()){T(!0),j({});var e=function(){var e=Math.floor((new Date).getTime()/1e3);return{title:l.title,description:l.description,instructions:C(l.instructions),lastUpdateDate:e}}();R.patch("/task/".concat(l.id),e).then((function(){T(!1),j({message:"Changes saved successfully",error:!1})})).catch((function(e){T(!1),j({message:"Something went wrong...",error:!0})}))}else j({message:"Please fill all fields",error:!0})}})))),r.a.createElement(E.a,{sm:1,md:2,lg:3})))})),Ge=a(411),Pe=a(233),qe=a.n(Pe),Ze=a(234),Qe=a.n(Ze),Ye=function(){return r.a.createElement(Ge.a.Brand,null,r.a.createElement(c.b,{to:"/",className:Qe.a.brandLink},r.a.createElement("img",{alt:"Logo",src:qe.a,height:"45",className:"d-inline-block align-top"})," ",r.a.createElement("div",null,"Tasker")))},We=a(413),Je=a(138),Xe=a.n(Je),$e=function(e){return r.a.createElement(c.c,{to:e.to,className:Xe.a.navLink,activeClassName:Xe.a.navLinkActive},e.children)},et=a(235),tt=a.n(et),at=function(e){return r.a.createElement("div",{className:tt.a.logoutBtn,onClick:e.onClick},e.children)},nt=Object(s.b)((function(e){return{userEmail:e.auth.email}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))((function(e){return e.userEmail?r.a.createElement(at,{onClick:e.logout},r.a.createElement($.a,{icon:ee.j})," Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{to:"/sign-up"},r.a.createElement($.a,{icon:ee.l})," Sign Up"),r.a.createElement($e,{to:"/sign-in"},r.a.createElement($.a,{icon:ee.i})," Sign In"))})),rt=function(){return r.a.createElement(Ge.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(We.a,{className:"mr-auto"},r.a.createElement($e,{to:"/create-task"},r.a.createElement($.a,{icon:ee.g})," Create task")),r.a.createElement(nt,null))},lt=(a(269),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{collapseOnSelect:!0,className:"shadow",expand:"lg",bg:"primary",variant:"light",fixed:"top"},r.a.createElement(Ye,null),r.a.createElement(Ge.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(rt,null)),r.a.createElement("div",{className:"empty"}))}),it=Object(s.b)((function(e){return{loading:e.auth.loading}}),(function(e){return{signInByLocalData:function(){e(H())},refreshTokenAndSignIn:function(t){e(V(t))},finishLoading:function(){e({type:"LOAD_FINISH"})},connectSocket:function(){e({type:"CONNECT_SOCKET"})}}}))((function(e){return Object(n.useEffect)((function(){!function(e,t,a){if(localStorage.getItem("token")){var n=localStorage.getItem("expirationTime")-30;if(+Math.floor((new Date).getTime()/1e3)>=n)e({token:localStorage.getItem("token")});else t()}else a()}(e.refreshTokenAndSignIn,e.signInByLocalData,e.finishLoading),e.connectSocket()}),[]),e.loading?r.a.createElement(ke,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/create-task",component:Fe,exact:!0}),r.a.createElement(o.b,{path:"/edit-task",component:ze,exact:!0}),r.a.createElement(o.b,{path:"/sign-in",component:q,exact:!0}),r.a.createElement(o.b,{path:"/sign-up",component:Y,exact:!0}),r.a.createElement(o.b,{path:"/",component:Se})))}));var ct=function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(it,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ot=a(69),st=a(236),ut=a(139),mt=a.n(ut),dt={id:null,email:null,token:null,expirationTime:null,errorMessage:null,authStart:!1,refreshTimerId:null,loading:!0},ft=function(e){localStorage.setItem("id",e.id),localStorage.setItem("email",e.email),localStorage.setItem("token",e.token),localStorage.setItem("expirationTime",e.expirationTime)},pt=function(){localStorage.clear()},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return{errorMessage:null,authStart:!0};case"LOGIN":var a=mt.a.decode(t.token.data),n={id:a.id,email:a.email,token:t.token.data,expirationTime:a.exp};return t.remember&&ft(n),Object(m.a)({},n);case"LOAD_FINISH":return Object(m.a)({},e,{loading:!1});case"AUTH_ERROR":return void 0===t.err.response?{errorMessage:"Service is unavailable. Please, try later...",authStart:!1}:{errorMessage:t.err.response.data.message,authStart:!1};case"REFRESH_TOKEN":var r=mt.a.decode(t.token.data),l={id:r.id,email:r.email,token:t.token.data,expirationTime:r.exp};return ft(l),Object(m.a)({},l);case"SIGN_IN_LOCALY":var i={id:localStorage.getItem("id"),email:localStorage.getItem("email"),token:localStorage.getItem("token"),expirationTime:localStorage.getItem("expirationTime")};return Object(m.a)({},i,{loading:!1});case"RESET_TIMEOUT_ID":return Object(m.a)({},e,{refreshTimerId:t.id});case"LOGOUT":return pt(),Object(m.a)({},dt,{loading:!1});default:return e}},ht={tasks:[],fetching:!1},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_START":return Object(m.a)({},e,{fetching:!0});case"FETCH_TASKS":return Object(m.a)({},e,{fetching:!1,tasks:Object(je.a)(t.tasks)});case"RECIVE_TASK":var a=t.data,n=a.from,r=a.task;r.sender=n;var l=Object(je.a)(e.tasks);return l.push(r),l.sort((function(e,t){return e.lastUpdateDate>t.lastUpdateDate?-1:e.lastUpdateDate===t.lastUpdateDate?0:1})),Object(m.a)({},e,{tasks:Object(je.a)(l)});case"CLEAR_TASKS":return Object(m.a)({},e,{tasks:[]});case"LEAVE_TASK":var i=e.tasks.filter((function(e){return e._id!==t.taskId}));return Object(m.a)({},e,{tasks:Object(je.a)(i)});default:return e}},gt=a(237),kt=a.n(gt),bt={socket:null},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECT_SOCKET":if(null!==e.socket)break;var a=kt.a.connect("https://immense-lake-83365.herokuapp.com/");return{socket:a};case"DISCONNECT_SOCKET":return e.socket.close(),Object(m.a)({},bt);default:return e}},_t=Object(ot.c)({auth:Et,task:vt,sckt:Tt}),Ot=Object(ot.d)(_t,Object(ot.a)(st.a));i.a.render(r.a.createElement(s.a,{store:Ot},r.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports={leaveIcon:"TaskMenu_leaveIcon__3uHT5",popoverItem:"TaskMenu_popoverItem__3v8lD",popoverBody:"TaskMenu_popoverBody__27R4h"}}},[[239,1,2]]]);
//# sourceMappingURL=main.acf62619.chunk.js.map